/* Material Design 3 - Light Theme System */
:root {
  /* MD3 Reference Tokens - For Material You Integration */
  --md-ref-palette-primary0: #000000;
  --md-ref-palette-primary10: #001d36;
  --md-ref-palette-primary20: #003258;
  --md-ref-palette-primary30: #004878;
  --md-ref-palette-primary40: #415f91;
  --md-ref-palette-primary50: #5c77ac;
  --md-ref-palette-primary60: #7891c8;
  --md-ref-palette-primary70: #94abe4;
  --md-ref-palette-primary80: #b1c7ff;
  --md-ref-palette-primary90: #d4e3ff;
  --md-ref-palette-primary95: #ecf3ff;
  --md-ref-palette-primary99: #fdfcff;
  --md-ref-palette-primary100: #ffffff;

  --md-ref-palette-secondary0: #000000;
  --md-ref-palette-secondary10: #0c1d31;
  --md-ref-palette-secondary20: #223249;
  --md-ref-palette-secondary30: #394861;
  --md-ref-palette-secondary40: #506079;
  --md-ref-palette-secondary50: #687993;
  --md-ref-palette-secondary60: #8293ad;
  --md-ref-palette-secondary70: #9cadca;
  --md-ref-palette-secondary80: #b8c8e6;
  --md-ref-palette-secondary90: #d4e3ff;
  --md-ref-palette-secondary95: #ecf3ff;
  --md-ref-palette-secondary99: #fdfcff;
  --md-ref-palette-secondary100: #ffffff;

  --md-ref-palette-tertiary0: #000000;
  --md-ref-palette-tertiary10: #2e1125;
  --md-ref-palette-tertiary20: #45273b;
  --md-ref-palette-tertiary30: #5d3d52;
  --md-ref-palette-tertiary40: #765469;
  --md-ref-palette-tertiary50: #906d82;
  --md-ref-palette-tertiary60: #ab869c;
  --md-ref-palette-tertiary70: #c7a0b6;
  --md-ref-palette-tertiary80: #e3bbd1;
  --md-ref-palette-tertiary90: #ffd8ec;
  --md-ref-palette-tertiary95: #ffecf4;
  --md-ref-palette-tertiary99: #fffbff;
  --md-ref-palette-tertiary100: #ffffff;

  --md-ref-palette-error0: #000000;
  --md-ref-palette-error10: #410002;
  --md-ref-palette-error20: #690005;
  --md-ref-palette-error30: #93000a;
  --md-ref-palette-error40: #ba1a1a;
  --md-ref-palette-error50: #de3730;
  --md-ref-palette-error60: #ff5449;
  --md-ref-palette-error70: #ff897d;
  --md-ref-palette-error80: #ffb4ab;
  --md-ref-palette-error90: #ffdad6;
  --md-ref-palette-error95: #ffedea;
  --md-ref-palette-error99: #fffbff;
  --md-ref-palette-error100: #ffffff;

  --md-ref-palette-neutral0: #000000;
  --md-ref-palette-neutral10: #1c1b1f;
  --md-ref-palette-neutral20: #313033;
  --md-ref-palette-neutral30: #48464a;
  --md-ref-palette-neutral40: #605d62;
  --md-ref-palette-neutral50: #787579;
  --md-ref-palette-neutral60: #939094;
  --md-ref-palette-neutral70: #aeaaaf;
  --md-ref-palette-neutral80: #c9c5ca;
  --md-ref-palette-neutral90: #e6e1e6;
  --md-ref-palette-neutral95: #f4eff4;
  --md-ref-palette-neutral99: #fffbff;
  --md-ref-palette-neutral100: #ffffff;

  --md-ref-palette-neutral-variant0: #000000;
  --md-ref-palette-neutral-variant10: #191c1e;
  --md-ref-palette-neutral-variant20: #2e3133;
  --md-ref-palette-neutral-variant30: #444749;
  --md-ref-palette-neutral-variant40: #5c5f61;
  --md-ref-palette-neutral-variant50: #747779;
  --md-ref-palette-neutral-variant60: #8e9193;
  --md-ref-palette-neutral-variant70: #a9abae;
  --md-ref-palette-neutral-variant80: #c4c7c9;
  --md-ref-palette-neutral-variant90: #e0e3e5;
  --md-ref-palette-neutral-variant95: #eef1f3;
  --md-ref-palette-neutral-variant99: #fbfdfd;
  --md-ref-palette-neutral-variant100: #ffffff;

  /* MD3 System Tokens - Light Theme */
  --md-sys-color-primary: var(--md-ref-palette-primary40);
  --md-sys-color-on-primary: var(--md-ref-palette-primary100);
  --md-sys-color-primary-container: var(--md-ref-palette-primary90);
  --md-sys-color-on-primary-container: var(--md-ref-palette-primary10);

  --md-sys-color-secondary: var(--md-ref-palette-secondary40);
  --md-sys-color-on-secondary: var(--md-ref-palette-secondary100);
  --md-sys-color-secondary-container: var(--md-ref-palette-secondary90);
  --md-sys-color-on-secondary-container: var(--md-ref-palette-secondary10);

  --md-sys-color-tertiary: var(--md-ref-palette-tertiary40);
  --md-sys-color-on-tertiary: var(--md-ref-palette-tertiary100);
  --md-sys-color-tertiary-container: var(--md-ref-palette-tertiary90);
  --md-sys-color-on-tertiary-container: var(--md-ref-palette-tertiary10);

  --md-sys-color-error: var(--md-ref-palette-error40);
  --md-sys-color-on-error: var(--md-ref-palette-error100);
  --md-sys-color-error-container: var(--md-ref-palette-error90);
  --md-sys-color-on-error-container: var(--md-ref-palette-error10);

  /* Surface Colors - MD3 Light Theme */
  --md-sys-color-surface-dim: var(--md-ref-palette-neutral87);
  --md-sys-color-surface: var(--md-ref-palette-neutral98);
  --md-sys-color-surface-bright: var(--md-ref-palette-neutral98);
  --md-sys-color-surface-container-lowest: var(--md-ref-palette-neutral100);
  --md-sys-color-surface-container-low: var(--md-ref-palette-neutral96);
  --md-sys-color-surface-container: var(--md-ref-palette-neutral94);
  --md-sys-color-surface-container-high: var(--md-ref-palette-neutral92);
  --md-sys-color-surface-container-highest: var(--md-ref-palette-neutral90);
  --md-sys-color-surface-variant: var(--md-ref-palette-neutral-variant90);
  --md-sys-color-on-surface: var(--md-ref-palette-neutral10);
  --md-sys-color-on-surface-variant: var(--md-ref-palette-neutral-variant30);

  /* Additional System Colors */
  --md-sys-color-outline: var(--md-ref-palette-neutral-variant50);
  --md-sys-color-outline-variant: var(--md-ref-palette-neutral-variant80);

  /* Inverse Colors - Light Theme */
  --md-sys-color-inverse-surface: var(--md-ref-palette-neutral20);
  --md-sys-color-inverse-on-surface: var(--md-ref-palette-neutral95);
  --md-sys-color-inverse-primary: var(--md-ref-palette-primary80);

  /* Shadow & Scrim */
  --md-sys-color-shadow: var(--md-ref-palette-neutral0);
  --md-sys-color-scrim: var(--md-ref-palette-neutral0);

  /* Scrim and Shadow */
  --md-sys-color-scrim: #000000;
  --md-sys-color-shadow: #000000;

  /* Spacing Scale (4dp grid - MD3 compliant) */
  --md-sys-spacing-0: 0px;
  --md-sys-spacing-1: 4px;
  --md-sys-spacing-2: 8px;
  --md-sys-spacing-3: 12px;
  --md-sys-spacing-4: 16px;
  --md-sys-spacing-5: 20px;
  --md-sys-spacing-6: 24px;
  --md-sys-spacing-7: 28px;
  --md-sys-spacing-8: 32px;
  --md-sys-spacing-9: 36px;
  --md-sys-spacing-10: 40px;
  --md-sys-spacing-11: 44px;
  --md-sys-spacing-12: 48px;
  --md-sys-spacing-13: 52px;
  --md-sys-spacing-14: 56px;
  --md-sys-spacing-15: 60px;
  --md-sys-spacing-16: 64px;

  /* Shape/Border Radius */
  --md-sys-shape-corner-extra-small: 4px;
  --md-sys-shape-corner-small: 6px;
  --md-sys-shape-corner-medium: 8px;
  --md-sys-shape-corner-large: 12px;
  --md-sys-shape-corner-full: 20px;

  /* Component Sizes */
  --md-sys-size-button-height: 36px;
  --md-sys-size-button-height-compact: 28px;

  /* Elevation - MD3 Tonal Elevation System with Shadows */
  --md-sys-elevation-level-0: var(--md-sys-color-surface);
  --md-sys-elevation-level-1: var(--md-sys-color-surface-container-low);
  --md-sys-elevation-level-2: var(--md-sys-color-surface-container);
  --md-sys-elevation-level-3: var(--md-sys-color-surface-container-high);
  --md-sys-elevation-level-4: var(--md-sys-color-surface-container-highest);
  --md-sys-elevation-level-5: var(--md-sys-color-surface-container-highest);

  /* Elevation Shadow System - MD3 Spec Compliant */
  --md-sys-elevation-shadow-level-0: none;
  --md-sys-elevation-shadow-level-1: none; /* MD3 Level 1 uses tonal overlay only */
  --md-sys-elevation-shadow-level-2: 0px 1px 2px 0px rgba(0, 0, 0, 0.3), 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
  --md-sys-elevation-shadow-level-3: 0px 1px 3px 0px rgba(0, 0, 0, 0.3), 0px 4px 8px 3px rgba(0, 0, 0, 0.15);
  --md-sys-elevation-shadow-level-4: 0px 2px 3px 0px rgba(0, 0, 0, 0.3), 0px 6px 10px 4px rgba(0, 0, 0, 0.15);
  --md-sys-elevation-shadow-level-5: 0px 4px 4px 0px rgba(0, 0, 0, 0.3), 0px 8px 12px 6px rgba(0, 0, 0, 0.15);

  /* Elevation Overlay Tints - MD3 Primary Overlays */
  --md-elev-overlay-1: color-mix(in srgb, var(--md-sys-color-primary) 5%, transparent);
  --md-elev-overlay-2: color-mix(in srgb, var(--md-sys-color-primary) 8%, transparent);
  --md-elev-overlay-3: color-mix(in srgb, var(--md-sys-color-primary) 11%, transparent);
  --md-elev-overlay-4: color-mix(in srgb, var(--md-sys-color-primary) 12%, transparent);
  --md-elev-overlay-5: color-mix(in srgb, var(--md-sys-color-primary) 24%); /* MD3 spec: 24% overlay at level 5 */

  /* Navigation Layout - MD3 Spec */
  --nav-width-default: 360px; /* Reduced from 360px for better space utilization */
  --nav-width-medium: 260px;
  --nav-width-small: 240px;
  --md-sys-font-family-monospace: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', monospace;
  --md-sys-font-family-sans: 'Heebo', sans-serif;

  /* Font Weight Tokens */
  --font-weight-regular: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 600;

  /* Additional Font Size Tokens */
  --font-size-sm: 12px;
  --font-size-base: 14px;
  --font-size-md: 16px;
  --font-size-lg: 18px;
  --font-size-xl: 20px;

  /* Missing Spacing Tokens */
  /* State Layer Opacity Tokens */
  --md-sys-state-hover: rgba(0, 0, 0, 0.08);
  --md-sys-state-focus: rgba(0, 0, 0, 0.12);
  --md-sys-state-pressed: rgba(0, 0, 0, 0.16);
  --md-sys-state-dragged: rgba(0, 0, 0, 0.16);

  /* MD3 Type Scale Tokens */
  --md-typescale-title-medium-size: 16px;
  --md-typescale-title-medium-lineheight: 24px;
  --md-typescale-title-small-size: 14px;
  --md-typescale-title-small-lineheight: 20px;
  --md-typescale-body-large-size: 16px;
  --md-typescale-body-large-lineheight: 24px;
  --md-typescale-body-medium-size: 14px;
  --md-typescale-body-medium-lineheight: 20px;
  --md-typescale-body-small-size: 12px;
  --md-typescale-body-small-lineheight: 16px;
  --md-typescale-label-large-size: 14px;
  --md-typescale-label-large-lineheight: 20px;
  --md-typescale-label-medium-size: 12px;
  --md-typescale-label-medium-lineheight: 16px;
  --md-typescale-label-small-size: 11px;
  --md-typescale-label-small-lineheight: 16px;
}

/* Modern browsers with color-mix support */
@supports (background: color-mix(in srgb, red 50%, blue)) {
  :root {
    --chart-background: color-mix(in srgb, var(--viz-neutral) 20%, transparent);

    /* State layer colors for interactive elements */
    --md-sys-state-hover: color-mix(in srgb, var(--md-sys-color-primary) 8%, transparent);
    --md-sys-state-focus: color-mix(in srgb, var(--md-sys-color-primary) 12%, transparent);
    --md-sys-state-pressed: color-mix(in srgb, var(--md-sys-color-primary) 16%, transparent);
    --md-sys-state-dragged: color-mix(in srgb, var(--md-sys-color-primary) 16%, transparent);
  }
}

/* Reset and Base Styles */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  font-size: 16px; /* MD3 minimum base font size */
  height: 100%;
}

body {
  min-height: 100%;
  width: 100%;
  font-family: var(--font-family-sans-serif, 'Heebo', sans-serif);
  background: var(--md-sys-color-surface);
  color: var(--md-sys-color-on-surface);
  font-size: var(--md-typescale-body-medium-size);
  line-height: 1.6;
}

/* General Styles */
.container {
  display: flex;
  flex-direction: row;
  width: 100%;
  height: calc(100vh - var(--movie-bar-height, 100px)); /* Account for fixed movie player bar */
}

.full-size-container {
  flex: 1 1 0%;
  min-width: 0;
  min-height: 0;
  background: var(--md-sys-color-surface);
  display: flex;
  align-items: stretch;
  justify-content: stretch;
  overflow: hidden; /* Prevent double scrollbar */
  position: relative;
}

#application-container {
  width: 100%;
  height: 100%;
  align-self: stretch;
  display: block;
  /* Removed padding to give full space to visualization */
  box-sizing: border-box;
}

/* SVG container should fill available space */
#application-container svg {
  width: 100%;
  height: 100%;
}

/* WebGL container styling for consistent sizing */
#webgl-container {
  width: 100%;
  height: 100%;
  position: relative;
  overflow: hidden;
}

#webgl-container canvas {
  display: block;
  width: 100% !important;
  height: 100% !important;
}

/* Utility class to hide elements */
.hidden {
  display: none !important;
}

.header {
  display: flex;
}

.logo {
  padding-top: 5px;
  padding-inline: 20px;
}

.fa-film {
  color: var(--md-sys-color-on-surface);
}

.row {
  display: flex;
  align-items: center;
  margin-block-end: var(--md-sys-spacing-2); /* 8px - MD3 compliant */
}

/* Text and Headers */
h1 {
  font-size: 1.5em; /* Typically 24px if base is 16px */
  margin-bottom: 16px; /* Added some default spacing */
  color: var(--md-sys-color-on-surface); /* Ensure h1 uses theme text color */
}


/* Tooltip Styles */
.tooltip {
  position: absolute;
  opacity: 0;
  background-color: var(--md-sys-color-inverse-surface);
  border-radius: var(--md-sys-shape-corner-small);
  padding: var(--md-sys-spacing-1) var(--md-sys-spacing-2);
  font-size: var(--md-typescale-body-small-size);
  line-height: var(--md-typescale-body-small-lineheight);
  font-weight: var(--font-weight-regular);
  font-family: var(--font-family-sans-serif, 'Heebo', sans-serif);
  color: var(--md-sys-color-inverse-on-surface);
  pointer-events: none;
  white-space: nowrap;
  z-index: 1000;
  transition: opacity 0.3s;
}

.winbox.modern.modal {
  border-radius: var(--md-sys-shape-corner-medium);
  background: var(--md-sys-elevation-level-2);
  border: 1px solid var(--md-sys-color-outline-variant);
}

.winbox.modern.modal .wb-body {
  background: var(--md-sys-elevation-level-2);
}

.winbox.modern.modal .wb-title {
  font-family: var(--font-family-sans-serif, 'Heebo', sans-serif);
  font-weight: var(--font-weight-medium, 500);
  font-size: var(--font-size-lg, 18px);
  color: var(--md-sys-color-on-surface);
}

/* ============================================================================
   MD3 ELEVATION HELPER CLASSES
   ============================================================================ */

/* Elevation Level 1 - Tonal overlay only */
.elev-1 {
  background: var(--md-sys-elevation-level-1);
  box-shadow: none;
  position: relative;
}

.elev-1::before {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--md-elev-overlay-1);
  border-radius: inherit;
  pointer-events: none;
}

/* Elevation Level 2 - Tonal overlay + subtle shadow */
.elev-2 {
  background: var(--md-sys-elevation-level-2);
  box-shadow: var(--md-sys-elevation-shadow-level-2);
  position: relative;
}

.elev-2::before {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--md-elev-overlay-2);
  border-radius: inherit;
  pointer-events: none;
}

/* Elevation Level 3 - Tonal overlay + medium shadow */
.elev-3 {
  background: var(--md-sys-elevation-level-3);
  box-shadow: var(--md-sys-elevation-shadow-level-3);
  position: relative;
}

.elev-3::before {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--md-elev-overlay-3);
  border-radius: inherit;
  pointer-events: none;
}

/* Elevation Level 4 - Tonal overlay + strong shadow */
.elev-4 {
  background: var(--md-sys-elevation-level-4);
  box-shadow: var(--md-sys-elevation-shadow-level-4);
  position: relative;
}

.elev-4::before {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--md-elev-overlay-4);
  border-radius: inherit;
  pointer-events: none;
}

/* Elevation Level 5 - Tonal overlay + strongest shadow */
.elev-5 {
  background: var(--md-sys-elevation-level-5);
  box-shadow: var(--md-sys-elevation-shadow-level-5);
  position: relative;
}

.elev-5::before {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--md-elev-overlay-5);
  border-radius: inherit;
  pointer-events: none;
}
