/**
 * Timeline Segment Color Scheme
 * 
 * Color strategy:
 * - Full trees (dark blue): Stable anchor points between interpolations
 * - Interpolation segments: Gradient from green to red based on complexity
 *   - Green: Minimal changes (1-2 edges)
 *   - Yellow: Light changes (3-4 edges)
 *   - Orange: Moderate changes (5-6 edges)
 *   - Red-orange: Heavy changes (7-8 edges)
 *   - Dark red: Massive changes (9+ edges)
 */

/* Timeline Segment Base */
.timeline-segment {
    /* CSS variable defaults used by deck.gl renderer (fill and border) */
    --seg-fill: #95A5A6;   /* default gray */
    --seg-border: #7F8C8D; /* default darker gray */
    border: 1px solid rgba(0, 0, 0, 0.2);
    border-radius: 2px;
    opacity: 0.9;
    transition: opacity 0.2s ease, transform 0.2s ease;
}

/* Full Tree Segments - Stable anchor points (PILLARS) */
.timeline-full-tree {
    --seg-fill: #212121;   /* dark body color */
    --seg-border: #000000; /* strong border */
    background: linear-gradient(135deg, #212121 0%, #424242 100%);  /* Dark gray/black gradient */
    border: 2px solid #000000;
    box-shadow: 
        0 2px 8px rgba(0, 0, 0, 0.6),          /* Dark shadow */
        0 0 0 1px rgba(255, 255, 255, 0.1) inset;  /* Subtle inner highlight */
    position: relative;
    z-index: 2;  /* Slightly elevated */
    min-height: 45px;  /* Taller for prominence */
    border-radius: 3px;  /* Subtle rounding */
}

/* Interpolation Segments - Colored by complexity (subdued for contrast) */
.timeline-interp-minimal {
    --seg-fill: #81C784;   /* light green */
    --seg-border: #66BB6A; /* green border */
    background: linear-gradient(135deg, #81C784 0%, #A5D6A7 100%);  /* Lighter green - minimal change */
    border-color: #66BB6A;
    opacity: 0.85;  /* Slightly transparent to emphasize full trees */
}

.timeline-interp-light {
    --seg-fill: #FFD54F;   /* light yellow */
    --seg-border: #FFCA28; /* yellow border */
    background: linear-gradient(135deg, #FFD54F 0%, #FFE082 100%);  /* Lighter yellow - light change */
    border-color: #FFCA28;
    opacity: 0.85;
}

.timeline-interp-moderate {
    --seg-fill: #FFB74D;   /* light orange */
    --seg-border: #FFA726; /* orange border */
    background: linear-gradient(135deg, #FFB74D 0%, #FFCC80 100%);  /* Lighter orange - moderate change */
    border-color: #FFA726;
    opacity: 0.85;
}

.timeline-interp-heavy {
    --seg-fill: #FF8A65;   /* light red-orange */
    --seg-border: #FF7043; /* red-orange border */
    background: linear-gradient(135deg, #FF8A65 0%, #FFAB91 100%);  /* Lighter red-orange - heavy change */
    border-color: #FF7043;
    opacity: 0.85;
}

.timeline-interp-massive {
    --seg-fill: #EF5350;   /* light red */
    --seg-border: #F44336; /* red border */
    background: linear-gradient(135deg, #EF5350 0%, #E57373 100%);  /* Lighter red - massive change */
    border-color: #F44336;
    opacity: 0.85;
}

/* Fallback for segments without classification */
.timeline-segment-default {
    --seg-fill: #95A5A6;   /* gray */
    --seg-border: #7F8C8D; /* darker gray */
    background: linear-gradient(135deg, #95A5A6 0%, #BDC3C7 100%);  /* Gray - unclassified */
    border-color: #7F8C8D;
}

/* Hover effects */
.timeline-segment:hover {
    opacity: 1;
    transform: scaleY(1.1);
    cursor: pointer;
}

/* Special hover for full trees */
.timeline-full-tree:hover {
    transform: scaleY(1.1);  /* Subtle expansion */
    background: linear-gradient(135deg, #000000 0%, #333333 100%);
    box-shadow: 
        0 4px 12px rgba(0, 0, 0, 0.8),
        0 0 0 2px rgba(255, 255, 255, 0.2) inset;
    cursor: pointer;
}

/* Selected segment */
.vis-selected .timeline-segment {
    box-shadow: 0 0 8px rgba(0, 0, 0, 0.5);
    border-width: 2px;
    opacity: 1;
}

/* Visual indicators for segment boundaries - PILLAR markers */
.timeline-full-tree::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 8px;
    background: linear-gradient(90deg, 
        rgba(0, 0, 0, 0.8) 0%, 
        rgba(0, 0, 0, 0.4) 40%,
        rgba(0, 0, 0, 0) 100%);  /* Strong black edge indicator */
    border-radius: 3px 0 0 3px;
    pointer-events: none;  /* Ensure it doesn't interfere with interaction */
    box-shadow: 0 0 4px rgba(0, 0, 0, 0.3);  /* Shadow effect */
}

.timeline-full-tree::after {
    content: '';
    position: absolute;
    right: 0;
    top: 0;
    bottom: 0;
    width: 8px;
    background: linear-gradient(270deg, 
        rgba(0, 0, 0, 0.8) 0%, 
        rgba(0, 0, 0, 0.4) 40%,
        rgba(0, 0, 0, 0) 100%);  /* Strong black edge indicator */
    border-radius: 0 3px 3px 0;
    pointer-events: none;  /* Ensure it doesn't interfere with interaction */
    box-shadow: 0 0 4px rgba(0, 0, 0, 0.3);  /* Shadow effect */
}
