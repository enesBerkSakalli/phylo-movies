<!-- Tree Navigation Panel - Material Design 3 -->
<div class="tree-navigation-panel" role="region" aria-label="Tree Navigation">
  <header class="panel-header">
    <span class="material-icons" aria-hidden="true">navigation</span>
    <h2 class="panel-title">Tree Navigation</h2>
  </header>

  <section class="panel-section status" aria-label="Tree status information">
    <!-- Tree Position Status -->
    <div class="compact-status tree-position" role="group" aria-labelledby="tree-position-label">
      <span class="material-icons" aria-hidden="true">nature</span>
      <div class="info-group">
        <span class="label" id="tree-position-label">Tree</span>
        <span class="value"><span id="currentFullTree" aria-label="Current full tree">0</span>/<span id="numberOfFullTrees" aria-label="Total full trees">0</span></span>
      </div>
      <div class="info-group">
        <span class="label">Step</span>
        <span class="value"><span id="currentTree" aria-label="Current step">0</span>/<span id="numberOfTrees" aria-label="Total steps">0</span></span>
      </div>
    </div>

    <!-- Tree Type Status -->
    <div class="compact-status tree-type" role="group" aria-labelledby="tree-type-label">
      <span class="material-icons" aria-hidden="true">share</span>
      <div class="info-group">
        <span class="label" id="tree-type-label">Type</span>
        <span class="value" id="treeLabel" aria-live="polite">-</span>
      </div>
    </div>

    <!-- MSA Window Status - Enhanced with Flexible Height -->
    <div class="msa-status" role="group" aria-labelledby="msa-title">
      <div class="msa-header">
        <div class="msa-title">
          <span class="material-icons" aria-hidden="true">science</span>
          <h3 class="msa-label" id="msa-title">Alignment Window</h3>
        </div>
        <div class="msa-region">
          <span class="region-label">Current Region</span>
          <span class="material-icons" title="Shows which part of the alignment corresponds to the current tree" aria-label="Information">info</span>
        </div>
      </div>

      <div class="msa-grid compact" role="grid" aria-label="MSA window information">
        <div class="msa-info-item" role="gridcell">
          <div class="msa-info-label">Window Size</div>
          <div class="msa-info-value" id="windowSize" aria-live="polite">-</div>
        </div>
        <div class="msa-info-item" role="gridcell">
          <div class="msa-info-label">Step Size</div>
          <div class="msa-info-value" id="windowStepSize" aria-live="polite">-</div>
        </div>
        <div class="msa-info-item" role="gridcell">
          <div class="msa-info-label">Coverage Area</div>
          <div class="msa-info-value" id="windowArea" aria-live="polite">-</div>
        </div>
      </div>
    </div>
  </section>

  <section class="panel-section controls" aria-label="Tree navigation controls">
    <!-- Position Control -->
    <div class="control-row" role="group" aria-labelledby="position-control-label">
      <span class="material-icons" aria-hidden="true">my_location</span>
      <label for="positionValue" class="sr-only" id="position-control-label">Navigate to specific position</label>
      <input
        type="number"
        id="positionValue"
        class="compact-input"
        name="pos"
        value="1"
        min="1"
        placeholder="Position"
        aria-describedby="position-help"
      />
      <div id="position-help" class="sr-only">Enter tree position number (1 to total number of trees)</div>
      <button
        id="positionButton"
        class="md-button primary"
        type="button"
        aria-label="Go to specified position"
      >
        <span class="material-icons">arrow_forward</span>
        <span class="button-text">Go</span>
      </button>
    </div>

    <!-- Visualization Control -->
    <div class="control-row" role="group" aria-labelledby="visualization-control-label">
      <span class="material-icons" aria-hidden="true">3d_rotation</span>
      <label for="scatter-plot-mode" id="visualization-control-label" class="sr-only">Visualization Method</label>
      <select
        id="scatter-plot-mode"
        class="compact-select"
        aria-describedby="viz-help"
        title="Choose visualization method: UMAP (recommended) or Fallback for tree space embedding"
      >
        <option value="umap">UMAP (Recommended)</option>
        <option value="fallback">Fallback Method</option>
      </select>
      <div id="viz-help" class="sr-only">Choose visualization method for tree space embedding</div>
      <button
        id="open-scatter-plot"
        class="md-button"
        type="button"
        aria-label="Open 3D tree space visualization"
        title="Open 3D tree space visualization using UMAP dimensionality reduction"
      >
        <span class="material-icons">open_in_new</span>
        <span class="button-text">Visualize</span>
      </button>
    </div>
  </section>

  <section class="panel-section scale" aria-labelledby="scale-title">
    <div class="scale-header">
      <div class="scale-title">
        <span id="scale-title">Scale</span>
        <span class="material-icons scale-info" title="Scale: Maximum root-to-leaf path length (sum of branch lengths) in the current tree" aria-label="Scale information">info</span>
      </div>
      <div class="scale-values" aria-live="polite">
        <span id="currentScaleText" aria-label="Current scale">0.000</span>
        <span aria-hidden="true">/</span>
        <span id="maxScaleText" aria-label="Maximum scale">0.000</span>
      </div>
    </div>
    <div class="scale-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" aria-label="Scale progress">
      <div class="scale-progress-bar"></div>
    </div>
    <p class="scale-explanation">
      Maximum root-to-leaf path length (sum of branch lengths)
    </p>
  </section>
</div>

<!-- Screen Reader Only Styles -->
<style>
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}
</style>
