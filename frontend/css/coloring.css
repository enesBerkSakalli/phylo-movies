/*
 * Coloring.js - CSS for TaxaColoring and Color Scheme Preset Selector UI
 * Unified Dark Theme
 */

/* Assuming WinBox sets its own dark background. These styles apply to content within. */
/* Alternatively, if WinBox content area is .wb-body or similar: */
/*
.wb-body {
  background-color: #1e1e1e !important;
  color: #e0e0e0 !important;
  font-family: 'Heebo', sans-serif;
}
*/

.factory-modal-content { /* Main content area within WinBox */
  padding: 20px;
  height: 100%;
  overflow-y: auto;
  box-sizing: border-box;
  background-color: #1e1e1e; /* Primary Background */
  color: #e0e0e0; /* Primary Text */
  font-family: 'Heebo', sans-serif; /* Global font for the modal */
}

.factory-modal-heading, /* h2 "Taxa Color Assignment" */
.color-scheme-heading,  /* Titles like "Individual Taxa", "Taxa Groups" */
.factory-csp-title      /* h4 "Color Schemes" */
 {
  color: #00aeff; /* Accent Text for headings */
  margin-top: 0; /* Reset top margin for headings */
  margin-bottom: 16px; /* Consistent bottom margin */
  font-weight: 600;
}
.factory-modal-heading { font-size: 1.5em; } /* Larger for main title */
.color-scheme-heading { font-size: 1.1em; }
.factory-csp-title { font-size: 1.1em; }


/* --- Removed Fallback Modal Styles --- */
/* .factory-fallback-modal-container, .factory-fallback-modal-header, etc. removed */

.factory-mode-container {
  margin-bottom: 20px;
}

.factory-mode-label,
.separator-label,
.color-input-label {
  color: #b0b0b0; /* Slightly dimmer text for labels */
  font-size: 0.9em;
  margin-right: 8px;
}
.color-input-label {
  flex-grow: 1; /* Allow label to take space */
  display: flex;
  align-items: center;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}


.factory-csp-container, /* Color scheme preset area */
.coloring-grid-panel    /* Container for taxa/group color inputs */
 {
  background-color: #2c2c2c; /* Secondary Background */
  border: 1px solid #444444; /* Border Color */
  border-radius: 8px;
  padding: 16px; /* Consistent padding */
  margin-bottom: 20px;
}

.factory-csp-schemes-wrapper {
  display: flex;
  gap: 8px; /* Spacing between scheme buttons */
  flex-wrap: wrap;
}

.scheme-button {
  background-color: #3a3a3a; /* Tertiary Background for buttons */
  border: 1px solid #444444; /* Border Color */
  border-radius: 6px;
  padding: 8px;
  display: flex;
  flex-direction: column;
  align-items: center;
  cursor: pointer;
  min-width: 70px;
  height: auto;
  color: #e0e0e0;
  transition: background-color 0.2s, border-color 0.2s;
}
.scheme-button:hover {
  background-color: #4a4a4a; /* Darker hover for tertiary */
  border-color: #555555;
}

.factory-csp-color-bar {
  width: 100%; /* Full width of button */
  height: 10px;
  margin-bottom: 6px;
  border-radius: 3px;
}

.factory-csp-scheme-name {
  font-size: 0.8em; /* Smaller text for scheme names */
  color: #b0b0b0;
}

.factory-color-container { /* Container for color inputs, usually a .coloring-grid-panel */
  margin-top: 16px;
}

.factory-color-input-grid { /* Used by UIComponentFactory */
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); /* Slightly wider min */
  gap: 12px;
}
/* Remove .color-input-grid if it's redundant with .factory-color-input-grid */
/* Fallback for .color-input-grid if it was meant to be distinct and still used:
.color-input-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 8px;
}
@media (min-width: 768px) {
  .color-input-grid { grid-template-columns: 1fr 1fr; }
}
*/


.color-input-container { /* Scrollable area for color inputs */
  background-color: #252525; /* Slightly different dark shade for depth */
  border-radius: 6px;
  padding: 8px; /* Reduced padding */
  margin-top: 8px; /* Space from header */
  max-height: 320px; /* Adjusted max-height */
  overflow-y: auto;
}

/* --- Unified Button Styles --- */
.md-button.primary, /* Factory's Apply button */
.coloring-btn-apply-button /* Hypothetical class for apply */
 {
  background: #00aeff; /* Accent color for primary action */
  color: #ffffff;
  border: 1px solid #00aeff;
  padding: 8px 16px; /* Consistent padding */
  border-radius: 6px;
  font-size: 0.9em;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s, border-color 0.2s;
  text-transform: uppercase; /* Common for material-ish buttons */
}
.md-button.primary:hover {
  background-color: #0095dd; /* Darker shade on hover */
  border-color: #0095dd;
}

.coloring-btn, /* Factory's Reset button */
.md-button    /* Factory's Cancel button */
 {
  background-color: #3a3a3a; /* Tertiary Background for secondary/default */
  color: #e0e0e0;
  border: 1px solid #555555; /* Slightly more visible border */
  padding: 8px 16px; /* Consistent padding */
  border-radius: 6px;
  font-size: 0.9em;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s, border-color 0.2s;
  text-transform: uppercase;
}
.coloring-btn:hover,
.md-button:hover {
  background-color: #4a4a4a; /* Darker hover */
  border-color: #666666;
}
/* Remove specific .coloring-btn gradients and different hover border */
/* Remove .apply-btn or merge if used */
.apply-btn { display: none; } /* Hide if obsolete */


.modal-footer {
  background-color: #2c2c2c; /* Secondary Background for footer */
  border-top: 1px solid #444444; /* Border Color */
  padding: 16px; /* Consistent padding */
  display: flex;
  justify-content: flex-end;
  gap: 12px; /* Space between buttons */
  position: sticky;
  bottom: 0;
  z-index: 10;
}


/* Error and info messages */
.color-scheme-error, .color-scheme-info {
  margin: 10px 0;
  font-size: 0.9em;
}
.color-scheme-error { color: #ff6b6b; /* Softer red */ }
.color-scheme-info { color: #e0e0e0; font-weight: normal; }


/* Remove .modal-overlay if only WinBox is used */
.modal-overlay { display: none; }


/* --- Select and Input Styling --- */
.mode-select, .separator-select { /* For <select> elements */
  padding: 8px 12px;
  font-size: 0.9em;
  border-radius: 6px;
  border: 1px solid #444444; /* Border Color */
  background: #2c2c2c; /* Secondary Background */
  color: #e0e0e0; /* Primary Text */
  transition: border-color 0.2s, box-shadow 0.2s;
  outline: none;
  box-shadow: none;
  flex-grow: 1;
}
.mode-select:focus, .separator-select:focus {
  border-color: #00aeff; /* Accent Color for focus */
  box-shadow: 0 0 0 2px rgba(0, 174, 255, 0.3); /* Focus ring */
}

.color-input-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 8px 5px; /* Padding for the row */
  /* border-left of 4px is applied by JS with the chosen color */
  padding-left: 10px; /* Ensure space for dynamic border */
  border-bottom: 1px solid #3a3a3a; /* Subtle separator inside container */
  margin-bottom: 0; /* Remove margin if gap is handled by grid */
  border-radius: 0; /* No radius for rows, container has it */
  background-color: transparent; /* Let container bg show */
}
.color-input-row:last-child {
  border-bottom: none;
}

.color-input, .color-input-editor { /* For <input type="color"> */
  width: 40px; /* Swatch size */
  height: 28px;
  border: 1px solid #444444; /* Border Color */
  padding: 0;
  cursor: pointer;
  background: #2c2c2c; /* Secondary Background for swatch area */
  border-radius: 4px;
  transition: border-color 0.2s, box-shadow 0.2s;
}
.color-input:focus, .color-input-editor:focus {
  border-color: #00aeff; /* Accent Color for focus */
  box-shadow: 0 0 0 2px rgba(0, 174, 255, 0.3);
}

.separator-container {
  margin-bottom: 20px; /* Consistent margin */
  margin-top: 10px; /* Added from JS inline style */
  display: flex;
  align-items: center;
  gap: 10px;
}
.separator-label {
  font-weight: 500; /* Standard weight */
  color: #b0b0b0; /* Standard label color */
  font-size: 0.9em;
  min-width: auto; /* Remove fixed min-width */
}

.group-count-badge {
  background-color: #3a3a3a; /* Tertiary Background */
  color: #e0e0e0; /* Primary Text */
  border-radius: 12px;
  padding: 3px 8px;
  font-size: 0.75em; /* Smaller badge text */
  margin-left: 8px;
}


/* Cleanup of potentially unused or conflicting old styles */
.coloring-modal-content, /* If this is the same as .factory-modal-content */
.color-scheme-card, /* Replaced by .factory-csp-container or .coloring-grid-panel */
.color-assignment-container,
.color-assignment-wrapper,
.color-assignment-header,
.dynamic-content, /* ID used, not class for general styling */
.coloring-mode-selector, /* Covered by .factory-mode-container and direct element styling */
.mode-label, /* Covered by .factory-mode-label */
.color-assignment-grid,
.taxa-color-modal {
  /* These selectors from the old structure might be unused or need careful merging. */
  /* For now, assume their intent is covered by .factory- classes or new base styles. */
  /* display: none; /* Safest way to check if they are used, then remove */
}


/* Responsive Design - Keep and test, adjust values if needed */
@media (max-width: 700px) {
  .factory-modal-content,
  .factory-csp-container,
  .coloring-grid-panel {
    padding: 12px; /* Simpler padding for smaller screens */
  }
  .factory-color-input-grid {
    grid-template-columns: 1fr; /* Single column for very small screens */
  }
}

@media (max-width: 480px) {
  .factory-modal-heading { font-size: 1.3em; }
  .color-scheme-heading, .factory-csp-title { font-size: 1.0em; }

  .md-button.primary,
  .coloring-btn,
  .md-button {
    font-size: 0.85em; /* Smaller button text */
    padding: 6px 12px; /* Smaller button padding */
  }
  .modal-footer {
    padding: 12px;
    gap: 8px;
  }
}
